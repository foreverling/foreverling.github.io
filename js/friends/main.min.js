function randomInRange(t,n){var i=Math.random()*(n-t)+t;return Math.floor(10*i)/10}function Hmlt5Audio(t,n){var i=new Audio(t);return i.autoplay=!0,i.loop=n||!1,i.play(),{end:function(t){i.addEventListener("ended",function(){t()},!1)}}}function Friends(){var t=this;setTimeout(function(){t.init()},1e3)}function Snow(t,n){this.width=document.documentElement.clientWidth,this.height=document.documentElement.clientHeight,this.snowArr=[],this.radius=[],this.alphaArr=[],this.x=[],this.y=[],this.default={num:30,maxRadius:10,minRadius:3,minAlpha:.5,maxAlpha:1,minSpeedY:.05,maxSpeedY:2},$.extend(this.default,n),this.canvas=document.getElementById(t),this.init()}$(function(){var t=new Audio("../other/letter.mp3");t.loop=!0,$("#btn").on("click",function(){t.play(),$(this).css("display","none");new Friends})}),Friends.prototype.init=function(){var t=this,n=document.documentElement.clientHeight/3;$(".monolog1").css("margin",n+"px auto 0"),$(".monolog2").css("margin",n+"px auto 0"),$(".monolog3").css("margin",n+"px auto 0"),$(".monolog4").css("margin",n+"px auto 0"),$("#bubble").transition({top:"55%",left:"220px",opacity:0},5e3,"linear",function(){$(".monolog1").css({opacity:1})}),$("#butterfly").transition({bottom:"85%",left:"90%",transform:"scale(0.8)"},1e4,"linear",function(){}),$("#people").transition({left:"30%"},1e4,"linear",function(){}),this.gTwo().then(function(){return t.swipePage()}).then(function(){return t.hand()}).then(function(){return t.monTwo()}).then(function(){return t.changePage()}).then(function(){$(".monolog3").transition({display:"none"},5e3,"linear",function(){}),$(".monolog4").transition({opacity:1},5e3,"linear",function(){})})},Friends.prototype.gTwo=function(){var t=$.Deferred();return $(".girl2").transition({bottom:0,left:"100px"},1e4,"linear",function(){t.resolve()}),t},Friends.prototype.swipePage=function(){var t=$.Deferred();return $(".page1").transition({left:"-100%"},6e3,"linear",function(){}),$(".page2").transition({left:0},6e3,"linear",function(){$("#butterfly").css("display","none"),t.resolve()}),t},Friends.prototype.hand=function(){$("#girl1").removeClass("girl1").addClass("hand1"),$("#girl2").removeClass("girl2").addClass("hand2")},Friends.prototype.monTwo=function(){var t=$.Deferred();return $(".monolog2").transition({opacity:1,transform:"scale(1)"},3e3,"linear",function(){t.resolve()}),t},Friends.prototype.changePage=function(){var t=$.Deferred();return $(".page2").transition({opacity:0,scale:8},5e3,"ease-in-out",function(){t.resolve()}),$(".page3").addClass("pageShow"),$("#people").transition({opacity:0},3e3,"ease-in-out",function(){(function(){new Snow("snow")})()}),t},Snow.prototype.init=function(){var t=this;this.canvas.width=this.width,this.canvas.height=this.height,this.ctx=this.canvas.getContext("2d");for(var n=0;n<this.default.num;n++)this.radius.push(randomInRange(this.default.minRadius,this.default.maxRadius)),this.alphaArr.push(randomInRange(this.default.minAlpha,this.default.maxAlpha)),this.x.push(Math.floor(Math.random()*this.width*10)/10),this.y.push(Math.floor(Math.random()*this.height*10)/10);var i=function(){t.update(),requestAnimationFrame(i)};i()},Snow.prototype.update=function(){this.ctx.clearRect(0,0,this.width,this.height);for(var t=0;t<this.default.num;t++)this.ctx.beginPath(),this.ctx.fillStyle="rgba(255, 255, 255, "+this.alphaArr[t]+")",this.y[t]+=randomInRange(this.default.minSpeedY,this.default.maxSpeedY),this.y[t]>this.height&&(this.y[t]-=this.height),this.ctx.arc(this.x[t],this.y[t],this.radius[t],0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fill()};